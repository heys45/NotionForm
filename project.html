<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="project.css">
    <title>SAUCEED｜プロジェクトページ</title>
</head>
<body>

    <div>projectTable</div>

    <div class="projectTable">
        <!-- <div class="project" "="">
            <div class="projectArea" style="width: 300px;">
                <div class="projectHeader">
                    <span class="projectName">プロジェクト１</span>
                    <span class="projectInfo1">工数目安：100時間｜完了目処：06/30（金）</span>
                    <span class="projectInfo2">実働工数：12</span>
                </div>
                <hr>
                <div class="taskArea">
                    
                    <div class="task">
                        <span class="taskInfo">・ゴール0｜完了目処：06/30（金）｜Done</span>
                        <span class="taskName">[</span>
                    </div>
                    
                    <div class="task">
                        <span class="taskInfo">・ゴール0｜完了目処：06/30（金）｜In progress</span>
                        <span class="taskName">{</span>
                    </div>
                    
                    <div class="task">
                        <span class="taskInfo">・ゴール0｜完了目処：06/30（金）｜Not started</span>
                        <span class="taskName">"</span>
                    </div>
        
                </div>
            </div>
            <div class="logArea">
              
              <div class="log">
                  <div class="logHeader">
                      <span class="logInfo">06/04（日）｜3時間｜＠自宅</span><button>ログ修正</button>
                  </div>
                  <div class="logDone">
                      <span>Done｜</span><span class="logDoneContent">undefined</span>
                  </div>
                  <div class="logNext">
                      <span>Next ｜</span><span class="logNextContent" undefined=""></span>
                  </div>
                  <div class="logUpdateForm">
                    <form>
                        <div class="inputWrapper">
                        <input type="hidden" class="f_format" name="format" value="更新ログ"> 
                        <input type="hidden" class="f_pageId" name="pageId" value="a33b994f-0721-485d-a4bb-5053904fa062"> 
                        <input type="date" class="f_date" name="date" value=""> 
                        <label for="工数" class="form-label">工数：</label>
                        <input type="number" class="f_工数" name="工数" value=""> 
                        <label for="場所" class="form-label">場所：</label>
                        <input type="text" class="f_場所" name="場所" value=""> 
                        </div>
                        <textarea class="f_done" name="done"></textarea> 
                        <textarea class="f_next" name="next"></textarea> 
                    </form>
                  </div>
              </div>
        
              <div class="log">
                  <div class="logHeader">
                      <span class="logInfo">06/04（日）｜3時間｜＠自宅</span><button>ログ修正</button>
                  </div>
                  <div class="logDone">
                      <span>Done｜</span><span class="logDoneContent">undefined</span>
                  </div>
                  <div class="logNext">
                      <span>Next ｜</span><span class="logNextContent" undefined=""></span>
                  </div>
                  <div class="logUpdateForm">
                    <form>
                        <div class="inputWrapper">
                        <input type="hidden" class="f_format" name="format" value="更新ログ"> 
                        <input type="hidden" class="f_pageId" name="pageId" value="a33b994f-0721-485d-a4bb-5053904fa062"> 
                        <input type="date" class="f_date" name="date" value=""> 
                        <label for="工数" class="form-label">工数：</label>
                        <input type="number" class="f_工数" name="工数" value=""> 
                        <label for="場所" class="form-label">場所：</label>
                        <input type="text" class="f_場所" name="場所" value=""> 
                        </div>
                        <textarea class="f_done" name="done"></textarea> 
                        <textarea class="f_next" name="next"></textarea> 
                    </form>
                  </div>
              </div>
        
              <div class="log">
                  <div class="logHeader">
                      <span class="logInfo">06/04（日）｜3時間｜＠自宅</span><button>ログ修正</button>
                  </div>
                  <div class="logDone">
                      <span>Done｜</span><span class="logDoneContent">undefined</span>
                  </div>
                  <div class="logNext">
                      <span>Next ｜</span><span class="logNextContent" undefined=""></span>
                  </div>
                  <div class="logUpdateForm">
                    <form>
                        <div class="inputWrapper">
                        <input type="hidden" class="f_format" name="format" value="更新ログ"> 
                        <input type="hidden" class="f_pageId" name="pageId" value="a33b994f-0721-485d-a4bb-5053904fa062"> 
                        <input type="date" class="f_date" name="date" value=""> 
                        <label for="工数" class="form-label">工数：</label>
                        <input type="number" class="f_工数" name="工数" value=""> 
                        <label for="場所" class="form-label">場所：</label>
                        <input type="text" class="f_場所" name="場所" value=""> 
                        </div>
                        <textarea class="f_done" name="done"></textarea> 
                        <textarea class="f_next" name="next"></textarea> 
                    </form>
                  </div>
              </div>
        
              <div class="log">
                  <div class="logHeader">
                      <span class="logInfo">06/04（日）｜3時間｜＠自宅</span><button>ログ修正</button>
                  </div>
                  <div class="logDone">
                      <span>Done｜</span><span class="logDoneContent">undefined</span>
                  </div>
                  <div class="logNext">
                      <span>Next ｜</span><span class="logNextContent" undefined=""></span>
                  </div>
                  <div class="logUpdateForm">
                    <form>
                        <div class="inputWrapper">
                        <input type="hidden" class="f_format" name="format" value="更新ログ"> 
                        <input type="hidden" class="f_pageId" name="pageId" value="a33b994f-0721-485d-a4bb-5053904fa062"> 
                        <input type="date" class="f_date" name="date" value=""> 
                        <label for="工数" class="form-label">工数：</label>
                        <input type="number" class="f_工数" name="工数" value=""> 
                        <label for="場所" class="form-label">場所：</label>
                        <input type="text" class="f_場所" name="場所" value=""> 
                        </div>
                        <textarea class="f_done" name="done"></textarea> 
                        <textarea class="f_next" name="next"></textarea> 
                    </form>
                  </div>
              </div>
        
              <hr>
              <div class="logCreateWrapper">
                <button>新規ログ追加</button>
              </div>
              
              <div class="logCreateForm">
                <form>
                    <div class="inputWrapper">
                    <input type="hidden" class="f_format" name="format" value="新規ログ"> 
                    <input type="date" class="f_date" name="date" value=""> 
                    <label for="工数" class="form-label">工数：</label>
                    <input type="number" class="f_工数" name="工数" value=""> 
                    <label for="場所" class="form-label">場所：</label>
                    <input type="text" class="f_場所" name="場所" value=""> 
                    </div>
                    <textarea class="f_done" name="done"></textarea> 
                    <textarea class="f_next" name="next"></textarea> 
                </form>
              </div>
            </div>
          </div> -->




        <script>
            fetch("https://script.google.com/macros/s/AKfycbwbM7zqxTI2yLZMOX760Z4rLgZCVncGk41maAxD63fuYpdlDk2ywnuebgrJaLoHx7kO/exec", {
                method: 'POST',
                headers: {
                    'Content-Type': 'text/plain',
                },
                body: JSON.stringify({
                }),
                mode: 'cors', //CORS対応
              })
              .then(response => response.text()) 
              .then(data => {
    
                var target = document.querySelector(".projectTable");
                target.innerHTML = data;


                // 更新用フォームの表示・非表示を制御
                var updateButtons = document.querySelectorAll('.logHeader button');
                for (let button of updateButtons) {
                    button.addEventListener('click', function(e) {
                        var parent = e.target.closest('.log');
                        var form = parent.querySelector('.logUpdateForm');
                        toggleFormDisplay(form);
                    });
                }

                // 新規ログ追加用フォームの表示・非表示を制御
                var createButton = document.querySelector('.logCreateWrapper button');
                createButton.addEventListener('click', function(e) {
                    var parent = e.target.closest('.logCreateWrapper');
                    var form = parent.nextElementSibling;
                    toggleFormDisplay(form);
                });

                // 今日の日付を取得し、新規追加用フォームにセット
                var today = new Date().toISOString().split('T')[0];
                var createDateInput = document.querySelector('.logCreateForm .f_date');
                createDateInput.value = today;
                

                function toggleFormDisplay(form) {
                    if (form.style.display === 'none' || form.style.display === '') {
                        form.style.display = 'block';
                    } else {
                        form.style.display = 'none';
                    }
                }

              })
        </script>            

    </div>
    
</body>
</html>
